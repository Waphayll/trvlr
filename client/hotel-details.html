<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        .hero-image {
            height: 400px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
        }
        .room-card {
            transition: transform 0.2s;
        }
        .room-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="hero-image" id="heroImage">
        <button class="btn btn-light back-btn" onclick="window.history.back()">
            <i class="bi bi-arrow-left"></i> Back
        </button>
    </div>

    <div class="container my-5">
        <div class="row">
            <div class="col-lg-8">
                <h1 id="hotelName">Hotel Name</h1>
                <div id="hotelStars" class="mb-2"></div>
                <p class="text-muted"><i class="bi bi-geo-alt-fill"></i> <span id="hotelAddress"></span></p>
                
                <hr class="my-4">
                
                <h4>About this hotel</h4>
                <div id="hotelDescription" class="mb-4"></div>
                
                <h4 class="mt-5">Available Rooms</h4>
                <div id="roomsList" class="row mt-3"></div>
            </div>
            
            <div class="col-lg-4">
                <div class="card sticky-top" style="top: 20px;">
                    <div class="card-body">
                        <h5 class="card-title">Booking Details</h5>
                        <hr>
                        <div class="mb-3">
                            <small class="text-muted">Check-in</small>
                            <p class="mb-0" id="checkinDate"></p>
                        </div>
                        <div class="mb-3">
                            <small class="text-muted">Check-out</small>
                            <p class="mb-0" id="checkoutDate"></p>
                        </div>
                        <div class="mb-3">
                            <small class="text-muted">Starting from</small>
                            <h3 class="text-primary mb-0" id="hotelPrice"></h3>
                        </div>
                        <button class="btn btn-primary w-100">Book Now</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Load hotel data from localStorage
        window.addEventListener('load', function() {
            const hotelData = JSON.parse(localStorage.getItem('selectedHotel'));
            
            if (!hotelData) {
                alert('No hotel data found!');
                window.history.back();
                return;
            }
            
            displayHotelDetails(hotelData);
        });

        function displayHotelDetails(rate) {
            const hotel = rate.hotel;
            const minRate = rate.roomTypes[0].rates[0];
            const price = minRate.retailRate.total[0].amount;
            const currency = minRate.retailRate.total[0].currency;
            
            const imageUrl = hotel.main_photo || hotel.thumbnail || 'https://via.placeholder.com/1200x400?text=Hotel';
            const stars = hotel.stars ? 'â­'.repeat(hotel.stars) : '';
            
            // Set hero image
            document.getElementById('heroImage').style.backgroundImage = `url('${imageUrl}')`;
            
            // Set hotel info
            document.getElementById('hotelName').textContent = hotel.name;
            document.getElementById('hotelStars').innerHTML = stars;
            document.getElementById('hotelAddress').textContent = hotel.address || hotel.city || 'Address not available';
            document.getElementById('hotelDescription').innerHTML = hotel.hotelDescription || 'No description available';
            document.getElementById('hotelPrice').textContent = `$${parseFloat(price).toFixed(2)} ${currency}/night`;
            
            // Set dates
            document.getElementById('checkinDate').textContent = getDateString(7);
            document.getElementById('checkoutDate').textContent = getDateString(9);
            
            // Display rooms
            displayRooms(rate.roomTypes);
        }

        function displayRooms(roomTypes) {
            const roomsList = document.getElementById('roomsList');
            
            roomsList.innerHTML = roomTypes.map(room => `
                <div class="col-12 mb-3">
                    <div class="card room-card">
                        <div class="card-body">
                            <h5 class="card-title">${room.name || 'Standard Room'}</h5>
                            <p class="card-text"><small class="text-muted">${room.description || 'Comfortable room'}</small></p>
                            ${room.rates.map(r => `
                                <div class="d-flex justify-content-between align-items-center border-top pt-2 mt-2">
                                    <div>
                                        <strong>${r.boardName || 'Room Only'}</strong>
                                        <br><small class="text-muted">${r.cancellationPolicies ? 'Cancellation available' : ''}</small>
                                    </div>
                                    <div class="text-end">
                                        <h5 class="text-primary mb-0">$${parseFloat(r.retailRate.total[0].amount).toFixed(2)}</h5>
                                        <small class="text-muted">${r.retailRate.total[0].currency}</small>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getDateString(daysFromNow) {
            const date = new Date();
            date.setDate(date.getDate() + daysFromNow);
            return date.toLocaleDateString('en-US', { 
                weekday: 'short', 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }
    </script>
</body>
</html>
